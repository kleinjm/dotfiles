# frozen_string_literal: true

# == Schema Information
#
# Table name: legal_entities
#
#  id            :bigint           not null, primary key
#  business_name :string           not null
#  customer_type :string           not null
#  date_created  :date
#  entity_type   :string           not null
#  international :boolean          default(FALSE), not null
#  jurisdiction  :string
#  revokable     :boolean          default(FALSE), not null
#  slug          :string           not null
#  uuid          :uuid             not null
#  created_at    :datetime         not null
#  updated_at    :datetime         not null
#  escrow_id     :bigint           not null
#  tax_id        :string           not null
#
# Indexes
#
#  index_legal_entities_on_escrow_id  (escrow_id)
#  index_legal_entities_on_slug       (slug) UNIQUE
#  index_legal_entities_on_uuid       (uuid) UNIQUE
#
# Foreign Keys
#
#  fk_rails_...  (escrow_id => escrows.id)
#
FactoryBot.define do
  factory :legal_entity do
    escrow
    entity_type { LegalEntity::ENTITY_TYPES[:corporation] }
    customer_type { LegalEntity::CUSTOMER_TYPES[:buyer] }
    sequence(:business_name) { |n| "Test Corporation #{n}" }
    sequence(:tax_id) { |n| "12-345678#{n}" }
    jurisdiction { 'Delaware' }
    international { false }
    revokable { false }

    trait :corporation do
      entity_type { LegalEntity::ENTITY_TYPES[:corporation] }
      sequence(:business_name) { |n| "Corporation Inc. #{n}" }
    end

    trait :llc do
      entity_type { LegalEntity::ENTITY_TYPES[:llc] }
      sequence(:business_name) { |n| "LLC Company #{n}" }
    end

    trait :trust do
      entity_type { LegalEntity::ENTITY_TYPES[:trust] }
      sequence(:business_name) { |n| "Family Trust #{n}" }
      date_created { 2.years.ago }
      revokable { true }
    end
  end
end
